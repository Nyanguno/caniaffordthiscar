<!DOCTYPE html>
<html lang="en">
<head>
   <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TC7C08ZXEK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TC7C08ZXEK');
</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Can I afford this car? Get an instant, free answer using proven affordability rules. Calculate car payments, insurance, and total ownership costs. No email required.">
    <meta name="keywords" content="car affordability calculator, auto loan calculator, car payment calculator, vehicle affordability, can I afford this car, car buying calculator">
    <title>Can I Afford This Car? - Free Calculator | No Email Required</title>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Can I Afford This Car? - Free Calculator">
    <meta property="og:description" content="Find out if you can afford that car instantly. Free calculator with no email required.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nyanguno.github.io/caniaffordthiscar">
    <meta property="og:image" content="https://nyanguno.github.io/caniaffordthiscar/car-calculator-preview.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Can I Afford This Car? - Free Calculator">
    <meta name="twitter:description" content="Find out if you can afford that car instantly. Free calculator with no email required.">
    <meta name="twitter:image" content="https://nyanguno.github.io/caniaffordthiscar/car-calculator-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🚗</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://nyanguno.github.io/caniaffordthiscar">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Can I Afford This Car? Calculator",
        "description": "Free car affordability calculator. Find out if you can afford that car instantly - no email required.",
        "url": "https://nyanguno.github.io/caniaffordthiscar",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Car affordability calculation",
            "Auto loan payment estimation",
            "Total cost of ownership analysis",
            "Insurance cost estimation",
            "Credit score based interest rates",
            "No email required",
            "Mobile friendly"
        ],
        "author": {
            "@type": "Organization",
            "name": "Can I Afford This Car"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is the 20/4/10 rule for car buying?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The 20/4/10 rule suggests putting down at least 20% as a down payment, financing for no more than 4 years, and keeping total vehicle expenses under 10% of your gross monthly income."
                }
            },
            {
                "@type": "Question",
                "name": "How much should I spend on a car based on my income?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Financial experts recommend spending no more than 10-15% of your gross monthly income on total vehicle expenses, including loan payments, insurance, fuel, and maintenance."
                }
            },
            {
                "@type": "Question",
                "name": "Should I buy new or used?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Used cars typically offer better value as they avoid the steepest depreciation. However, new cars come with warranties and the latest safety features. Consider your budget, reliability needs, and how long you plan to keep the car."
                }
            }
        ]
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header-nav {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 16px 24px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        
        .house-link {
            background: rgba(255, 255, 255, 0.2) !important;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .hero {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .hero .subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .calculator-card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .calculator-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            background: #f1f5f9;
            padding: 4px;
            border-radius: 12px;
        }
        
        .tab-button {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
        }
        
        .tab-button.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 1rem;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .optional {
            font-weight: 400;
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .calculate-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 24px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .calculate-btn:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 32px;
            padding: 24px;
            border-radius: 12px;
            font-size: 1.1rem;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result.success {
            background: #ecfdf5;
            border: 2px solid #10b981;
            color: #065f46;
        }
        
        .result.warning {
            background: #fffbeb;
            border: 2px solid #f59e0b;
            color: #92400e;
        }
        
        .result.danger {
            background: #fef2f2;
            border: 2px solid #ef4444;
            color: #991b1b;
        }
        
        .result-icon {
            font-size: 2rem;
            margin-bottom: 12px;
            display: block;
        }
        
        .payment-breakdown {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
        }
        
        .payment-breakdown h4 {
            margin-bottom: 12px;
            color: #374151;
        }
        
        .payment-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 4px 0;
        }
        
        .payment-item.total {
            border-top: 2px solid #e5e7eb;
            padding-top: 12px;
            margin-top: 12px;
            font-weight: 600;
        }
        
        .affordability-meter {
            background: #f1f5f9;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .meter-label {
            text-align: center;
            font-weight: 600;
            margin-bottom: 12px;
            color: #374151;
        }
        
        .meter-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }
        
        .meter-fill {
            height: 100%;
            border-radius: 6px;
            transition: all 0.5s ease;
            position: relative;
        }
        
        .meter-fill.good {
            background: linear-gradient(90deg, #10b981, #34d399);
        }
        
        .meter-fill.warning {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
        }
        
        .meter-fill.danger {
            background: linear-gradient(90deg, #ef4444, #f87171);
        }
        
        .meter-percentage {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .info-section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            margin-bottom: 40px;
        }
        
        .info-section h2 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .info-section p {
            margin-bottom: 16px;
            color: #6b7280;
            line-height: 1.7;
        }
        
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }
        
        .rule-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            border-left: 4px solid #6366f1;
        }
        
        .rule-card h3 {
            color: #1f2937;
            margin-bottom: 12px;
            font-size: 1.2rem;
        }
        
        .rule-card p {
            color: #6b7280;
            margin: 0;
            line-height: 1.6;
        }
        
        .faq {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            margin-bottom: 40px;
        }
        
        .faq h2 {
            color: #1f2937;
            margin-bottom: 30px;
            font-size: 1.8rem;
            text-align: center;
        }
        
        .faq-item {
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 0;
        }
        
        .faq-item:last-child {
            border-bottom: none;
        }
        
        .faq-question {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .faq-question:hover {
            color: #667eea;
        }
        
        .faq-answer {
            color: #6b7280;
            line-height: 1.6;
            display: none;
        }
        
        .faq-answer.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            color: white;
            margin-top: 40px;
        }
        
        .footer p {
            margin-bottom: 12px;
            opacity: 0.9;
        }
        
        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .calculator-card {
                padding: 24px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 12px;
                width: 100%;
            }
            
            .header-nav {
                flex-direction: column;
                align-items: stretch;
            }
            
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .comparison-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }
        
        .comparison-table tr:hover {
            background: #f9fafb;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="header-nav">
            <div class="nav-links">
                <a href="#calculator">Calculator</a>
                <a href="#guide">Guide</a>
                <a href="#faq">FAQ</a>
                <a href="https://nyanguno.github.io/caniaffordthishouse" class="house-link" target="_blank">🏠 House Calculator</a>
            </div>
        </nav>
        
        <div class="hero">
            <h1>Can I Afford This Car? 🚗</h1>
            <p>Get an instant, free answer using proven affordability rules</p>
            <p class="subtitle">No email required • Mobile friendly • Completely free</p>
        </div>
        
        <div class="calculator-card" id="calculator">
            <div class="calculator-tabs">
                <button class="tab-button active" onclick="switchTab('basic')">Basic Calculator</button>
                <button class="tab-button" onclick="switchTab('advanced')">Advanced Analysis</button>
                <button class="tab-button" onclick="switchTab('comparison')">Compare Cars</button>
            </div>
            
            <div id="basic-tab" class="tab-content active">
                <form id="car-calculator">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="car-price">Car Price ($)</label>
                            <input type="number" id="car-price" placeholder="25000" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="down-payment">Down Payment ($)</label>
                            <input type="number" id="down-payment" placeholder="5000" min="0" step="100">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="annual-income">Annual Income ($)</label>
                            <input type="number" id="annual-income" placeholder="60000" min="0" step="1000">
                        </div>
                        <div class="form-group">
                            <label for="monthly-debts">Monthly Debt Payments ($) <span class="optional">(optional)</span></label>
                            <input type="number" id="monthly-debts" placeholder="500" min="0" step="50">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="credit-score">Credit Score Range</label>
                            <select id="credit-score">
                                <option value="excellent">Excellent (750+)</option>
                                <option value="good" selected>Good (700-749)</option>
                                <option value="fair">Fair (650-699)</option>
                                <option value="poor">Poor (600-649)</option>
                                <option value="bad">Bad (Below 600)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="loan-term">Loan Term</label>
                            <select id="loan-term">
                                <option value="36">36 months</option>
                                <option value="48" selected>48 months</option>
                                <option value="60">60 months</option>
                                <option value="72">72 months</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="insurance-estimate">Monthly Insurance ($) <span class="optional">(optional)</span></label>
                            <input type="number" id="insurance-estimate" placeholder="150" min="0" step="10">
                        </div>
                        <div class="form-group">
                            <label for="trade-in-value">Trade-in Value ($) <span class="optional">(optional)</span></label>
                            <input type="number" id="trade-in-value" placeholder="0" min="0" step="100">
                        </div>
                    </div>
                    
                    <button type="button" class="calculate-btn" onclick="calculateAffordability()">
                        Calculate Car Affordability
                    </button>
                </form>
                
                <div id="result" class="result"></div>
            </div>
            
            <div id="advanced-tab" class="tab-content">
                <h3 style="margin-bottom: 24px; color: #374151;">Advanced Cost Analysis</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="fuel-mpg">Fuel Economy (MPG)</label>
                        <input type="number" id="fuel-mpg" placeholder="25" min="1" step="1">
                    </div>
                    <div class="form-group">
                        <label for="miles-per-year">Miles Driven Per Year</label>
                        <input type="number" id="miles-per-year" placeholder="12000" min="0" step="1000">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="gas-price">Gas Price Per Gallon ($)</label>
                        <input type="number" id="gas-price" placeholder="3.50" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="maintenance-cost">Annual Maintenance ($)</label>
                        <input type="number" id="maintenance-cost" placeholder="1200" min="0" step="100">
                    </div>
                </div>
                
                <button type="button" class="calculate-btn" onclick="calculateAdvanced()">
                    Calculate Total Cost of Ownership
                </button>
                
                <div id="advanced-result" class="result"></div>
            </div>
            
            <div id="comparison-tab" class="tab-content">
                <h3 style="margin-bottom: 24px; color: #374151;">Compare Multiple Cars</h3>
                <p style="color: #6b7280; margin-bottom: 24px;">Enter details for up to 3 cars to compare their affordability and total costs.</p>
                
                <div id="comparison-cars">
                    <div class="comparison-car" data-car="1">
                        <h4 style="color: #374151; margin-bottom: 16px;">Car 1</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="car1-name">Car Name</label>
                                <input type="text" id="car1-name" placeholder="e.g., Honda Civic">
                            </div>
                            <div class="form-group">
                                <label for="car1-price">Price ($)</label>
                                <input type="number" id="car1-price" placeholder="25000" min="0" step="100">
                            </div>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="calculate-btn" onclick="addComparisonCar()" id="add-car-btn">
                    Add Another Car
                </button>
                
                <button type="button" class="calculate-btn" onclick="compareCars()" style="margin-top: 8px;">
                    Compare Cars
                </button>
                
                <div id="comparison-result" class="result"></div>
            </div>
        </div>
        
        <div class="info-section" id="guide">
            <h2>Car Affordability Rules & Guidelines</h2>
            <p>Understanding how much car you can afford is crucial for maintaining financial health. Here are the most widely accepted rules and guidelines used by financial experts and lenders.</p>
            
            <div class="rules-grid">
                <div class="rule-card">
                    <h3>20/4/10 Rule</h3>
                    <p>Put down at least 20%, finance for no more than 4 years, and keep total vehicle expenses under 10% of gross monthly income. This conservative approach helps avoid being underwater on your loan.</p>
                </div>
                
                <div class="rule-card">
                    <h3>Total Transportation Budget</h3>
                    <p>Include car payment, insurance, fuel, maintenance, and repairs. Many people forget these additional costs, which can add $200-500+ monthly to your transportation expenses.</p>
                </div>
                
                <div class="rule-card">
                    <h3>Debt-to-Income Ratio</h3>
                    <p>Your total monthly debt payments (including the new car) should not exceed 36-40% of your gross monthly income. This ensures you have enough left for other expenses and savings.</p>
                </div>
                
                <div class="rule-card">
                    <h3>Emergency Fund First</h3>
                    <p>Have at least 3-6 months of expenses saved before taking on a car payment. Cars are depreciating assets, and unexpected repairs can strain your budget.</p>
                </div>
            </div>
        </div>
        
        <div class="faq" id="faq">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    What is the 20/4/10 rule for car buying?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    The 20/4/10 rule suggests putting down at least 20% as a down payment, financing for no more than 4 years, and keeping total vehicle expenses under 10% of your gross monthly income. This conservative approach helps ensure you don't become financially overextended.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    How much should I spend on a car based on my income?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Financial experts recommend spending no more than 10-15% of your gross monthly income on total vehicle expenses, including loan payments, insurance, fuel, and maintenance. For example, if you earn $5,000 monthly, your total car expenses should not exceed $500-750.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    Should I buy new or used?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Used cars typically offer better value as they avoid the steepest depreciation that occurs in the first few years. However, new cars come with warranties and the latest safety features. Consider your budget, reliability needs, and how long you plan to keep the car.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    What credit score do I need for a good car loan rate?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Generally, a credit score of 700+ will get you the best rates. Scores of 650-699 are considered fair and will qualify for decent rates. Below 650, you may face higher interest rates or need a co-signer.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    How accurate are these calculations?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Our calculations use industry-standard formulas and typical interest rates based on credit scores. However, actual rates vary by lender, loan type, and market conditions. Always get pre-approved for the most accurate rate and payment information.
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2024 Can I Afford This Car? | Free Financial Calculator</p>
            <p>
                <a href="https://nyanguno.github.io/caniaffordthishouse" target="_blank">🏠 Can I Afford This House?</a> | 
                <a href="#calculator">Calculator</a> | 
                <a href="#guide">Guide</a> | 
                <a href="#faq">FAQ</a>
            </p>
            <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 16px;">
                This calculator provides estimates for educational purposes. Consult with financial professionals for personalized advice.
            </p>
        </div>
    </div>
    
    <script>
        // Interest rates based on credit score
        const interestRates = {
            excellent: 0.04,  // 4%
            good: 0.06,       // 6%
            fair: 0.08,       // 8%
            poor: 0.12,       // 12%
            bad: 0.16         // 16%
        };
        
        let comparisonCarCount = 1;
        
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        function calculateAffordability() {
            const carPrice = parseFloat(document.getElementById('car-price').value) || 0;
            const downPayment = parseFloat(document.getElementById('down-payment').value) || 0;
            const annualIncome = parseFloat(document.getElementById('annual-income').value) || 0;
            const monthlyDebts = parseFloat(document.getElementById('monthly-debts').value) || 0;
            const creditScore = document.getElementById('credit-score').value;
            const loanTerm = parseInt(document.getElementById('loan-term').value);
            const insurance = parseFloat(document.getElementById('insurance-estimate').value) || 150;
            const tradeIn = parseFloat(document.getElementById('trade-in-value').value) || 0;
            
            if (carPrice === 0 || annualIncome === 0) {
                alert('Please enter car price and annual income');
                return;
            }
            
            const monthlyIncome = annualIncome / 12;
            const loanAmount = carPrice - downPayment - tradeIn;
            const interestRate = interestRates[creditScore];
            const monthlyRate = interestRate / 12;
            
            // Calculate monthly payment
            const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, loanTerm)) / (Math.pow(1 + monthlyRate, loanTerm) - 1);
            
            // Total monthly vehicle expenses
            const totalMonthlyExpense = monthlyPayment + insurance + 100; // $100 estimated fuel/maintenance
            
            // Calculate percentages
            const paymentPercentage = (monthlyPayment / monthlyIncome) * 100;
            const totalExpensePercentage = (totalMonthlyExpense / monthlyIncome) * 100;
            const debtToIncomeRatio = ((monthlyDebts + monthlyPayment) / monthlyIncome) * 100;
            
            // Determine affordability
            let affordability, resultClass, icon, message;
            
            if (totalExpensePercentage <= 10 && debtToIncomeRatio <= 36) {
                affordability = 'Excellent';
                resultClass = 'success';
                icon = '✅';
                message = 'This car fits comfortably within your budget!';
            } else if (totalExpensePercentage <= 15 && debtToIncomeRatio <= 40) {
                affordability = 'Good';
                resultClass = 'warning';
                icon = '⚠️';
                message = 'This car is affordable but will be a significant expense.';
            } else {
                affordability = 'Risky';
                resultClass = 'danger';
                icon = '❌';
                message = 'This car may strain your budget. Consider a less expensive option.';
            }
            
            const resultDiv = document.getElementById('result');
            resultDiv.className = `result ${resultClass}`;
            resultDiv.style.display = 'block';
            
            resultDiv.innerHTML = `
                <span class="result-icon">${icon}</span>
                <h3>Affordability Assessment: ${affordability}</h3>
                <p>${message}</p>
                
                <div class="payment-breakdown">
                    <h4>Monthly Payment Breakdown</h4>
                    <div class="payment-item">
                        <span>Car Payment:</span>
                        <span>$${monthlyPayment.toFixed(2)}</span>
                    </div>
                    <div class="payment-item">
                        <span>Insurance:</span>
                        <span>$${insurance.toFixed(2)}</span>
                    </div>
                    <div class="payment-item">
                        <span>Fuel & Maintenance (est.):</span>
                        <span>$100.00</span>
                    </div>
                    <div class="payment-item total">
                        <span>Total Monthly Cost:</span>
                        <span>$${totalMonthlyExpense.toFixed(2)}</span>
                    </div>
                </div>
                
                <div class="affordability-meter">
                    <div class="meter-label">Transportation Budget: ${totalExpensePercentage.toFixed(1)}% of Income</div>
                    <div class="meter-bar">
                        <div class="meter-fill ${resultClass}" style="width: ${Math.min(totalExpensePercentage, 100)}%">
                            <span class="meter-percentage">${totalExpensePercentage.toFixed(1)}%</span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 16px; font-size: 0.9rem; color: #6b7280;">
                    <p><strong>Loan Details:</strong> $${loanAmount.toFixed(2)} at ${(interestRate * 100).toFixed(1)}% APR for ${loanTerm} months</p>
                    <p><strong>Total Interest:</strong> $${((monthlyPayment * loanTerm) - loanAmount).toFixed(2)}</p>
                    <p><strong>Debt-to-Income Ratio:</strong> ${debtToIncomeRatio.toFixed(1)}% (recommended: under 36%)</p>
                </div>
            `;
        }
        
        function calculateAdvanced() {
            const mpg = parseFloat(document.getElementById('fuel-mpg').value) || 25;
            const milesPerYear = parseFloat(document.getElementById('miles-per-year').value) || 12000;
            const gasPrice = parseFloat(document.getElementById('gas-price').value) || 3.50;
            const maintenanceCost = parseFloat(document.getElementById('maintenance-cost').value) || 1200;
            
            // Get basic calculator values
            const carPrice = parseFloat(document.getElementById('car-price').value) || 0;
            const annualIncome = parseFloat(document.getElementById('annual-income').value) || 0;
            
            if (carPrice === 0 || annualIncome === 0) {
                alert('Please fill out the basic calculator first');
                return;
            }
            
            // Calculate annual costs
            const annualFuelCost = (milesPerYear / mpg) * gasPrice;
            const totalAnnualCost = annualFuelCost + maintenanceCost;
            const monthlyOperatingCost = totalAnnualCost / 12;
            
            // 5-year total cost of ownership
            const fiveYearDepreciation = carPrice * 0.6; // Assume 60% depreciation
            const fiveYearOperatingCost = totalAnnualCost * 5;
            const totalCostOfOwnership = carPrice + fiveYearOperatingCost;
            
            const resultDiv = document.getElementById('advanced-result');
            resultDiv.className = 'result success';
            resultDiv.style.display = 'block';
            
            resultDiv.innerHTML = `
                <span class="result-icon">📊</span>
                <h3>Total Cost of Ownership Analysis</h3>
                
                <div class="payment-breakdown">
                    <h4>Annual Operating Costs</h4>
                    <div class="payment-item">
                        <span>Fuel (${milesPerYear.toLocaleString()} miles @ ${mpg} MPG):</span>
                        <span>$${annualFuelCost.toFixed(2)}</span>
                    </div>
                    <div class="payment-item">
                        <span>Maintenance & Repairs:</span>
                        <span>$${maintenanceCost.toFixed(2)}</span>
                    </div>
                    <div class="payment-item total">
                        <span>Total Annual Operating Cost:</span>
                        <span>$${totalAnnualCost.toFixed(2)}</span>
                    </div>
                    <div class="payment-item">
                        <span>Monthly Operating Cost:</span>
                        <span>$${monthlyOperatingCost.toFixed(2)}</span>
                    </div>
                </div>
                
                <div class="payment-breakdown">
                    <h4>5-Year Total Cost of Ownership</h4>
                    <div class="payment-item">
                        <span>Purchase Price:</span>
                        <span>$${carPrice.toLocaleString()}</span>
                    </div>
                    <div class="payment-item">
                        <span>5-Year Operating Costs:</span>
                        <span>$${fiveYearOperatingCost.toLocaleString()}</span>
                    </div>
                    <div class="payment-item">
                        <span>Expected Depreciation:</span>
                        <span>-$${fiveYearDepreciation.toLocaleString()}</span>
                    </div>
                    <div class="payment-item total">
                        <span>Net 5-Year Cost:</span>
                        <span>$${(totalCostOfOwnership - (carPrice - fiveYearDepreciation)).toLocaleString()}</span>
                    </div>
                </div>
                
                <div style="margin-top: 16px; font-size: 0.9rem; color: #6b7280;">
                    <p><strong>Cost per mile:</strong> $${(totalCostOfOwnership / (milesPerYear * 5)).toFixed(3)}</p>
                    <p><strong>Monthly total (payment + operating):</strong> Add $${monthlyOperatingCost.toFixed(2)} to your loan payment</p>
                </div>
            `;
        }
        
        function addComparisonCar() {
            if (comparisonCarCount >= 3) {
                alert('Maximum 3 cars can be compared');
                return;
            }
            
            comparisonCarCount++;
            const container = document.getElementById('comparison-cars');
            
            const carDiv = document.createElement('div');
            carDiv.className = 'comparison-car';
            carDiv.setAttribute('data-car', comparisonCarCount);
            carDiv.innerHTML = `
                <h4 style="color: #374151; margin-bottom: 16px;">Car ${comparisonCarCount}</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label for="car${comparisonCarCount}-name">Car Name</label>
                        <input type="text" id="car${comparisonCarCount}-name" placeholder="e.g., Toyota Camry">
                    </div>
                    <div class="form-group">
                        <label for="car${comparisonCarCount}-price">Price ($)</label>
                        <input type="number" id="car${comparisonCarCount}-price" placeholder="30000" min="0" step="100">
                    </div>
                </div>
            `;
            
            container.appendChild(carDiv);
            
            if (comparisonCarCount >= 3) {
                document.getElementById('add-car-btn').style.display = 'none';
            }
        }
        
        function compareCars() {
            const annualIncome = parseFloat(document.getElementById('annual-income').value) || 0;
            const creditScore = document.getElementById('credit-score').value;
            const loanTerm = parseInt(document.getElementById('loan-term').value);
            
            if (annualIncome === 0) {
                alert('Please enter your annual income in the basic calculator');
                return;
            }
            
            const cars = [];
            for (let i = 1; i <= comparisonCarCount; i++) {
                const name = document.getElementById(`car${i}-name`).value || `Car ${i}`;
                const price = parseFloat(document.getElementById(`car${i}-price`).value) || 0;
                
                if (price > 0) {
                    const monthlyIncome = annualIncome / 12;
                    const downPayment = price * 0.2; // Assume 20% down
                    const loanAmount = price - downPayment;
                    const interestRate = interestRates[creditScore];
                    const monthlyRate = interestRate / 12;
                    
                    const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, loanTerm)) / (Math.pow(1 + monthlyRate, loanTerm) - 1);
                    const paymentPercentage = (monthlyPayment / monthlyIncome) * 100;
                    
                    cars.push({
                        name,
                        price,
                        monthlyPayment,
                        paymentPercentage,
                        downPayment
                    });
                }
            }
            
            if (cars.length === 0) {
                alert('Please enter at least one car price');
                return;
            }
            
            // Sort cars by affordability (lowest percentage first)
            cars.sort((a, b) => a.paymentPercentage - b.paymentPercentage);
            
            let tableHTML = `
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Car</th>
                            <th>Price</th>
                            <th>Down Payment (20%)</th>
                            <th>Monthly Payment</th>
                            <th>% of Income</th>
                            <th>Affordability</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            cars.forEach(car => {
                let affordability, rowClass;
                if (car.paymentPercentage <= 10) {
                    affordability = 'Excellent';
                    rowClass = 'success';
                } else if (car.paymentPercentage <= 15) {
                    affordability = 'Good';
                    rowClass = 'warning';
                } else {
                    affordability = 'Risky';
                    rowClass = 'danger';
                }
                
                tableHTML += `
                    <tr class="${rowClass}">
                        <td><strong>${car.name}</strong></td>
                        <td>$${car.price.toLocaleString()}</td>
                        <td>$${car.downPayment.toLocaleString()}</td>
                        <td>$${car.monthlyPayment.toFixed(2)}</td>
                        <td>${car.paymentPercentage.toFixed(1)}%</td>
                        <td>${affordability}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            
            const resultDiv = document.getElementById('comparison-result');
            resultDiv.className = 'result success';
            resultDiv.style.display = 'block';
            
            resultDiv.innerHTML = `
                <span class="result-icon">📊</span>
                <h3>Car Comparison Results</h3>
                <p>Based on your income of $${annualIncome.toLocaleString()}/year, here's how these cars compare:</p>
                ${tableHTML}
                <div style="margin-top: 16px; font-size: 0.9rem; color: #6b7280;">
                    <p><strong>Recommendation:</strong> ${cars[0].name} is the most affordable option at ${cars[0].paymentPercentage.toFixed(1)}% of your income.</p>
                    <p>Calculations assume 20% down payment and ${loanTerm}-month loan at ${(interestRates[creditScore] * 100).toFixed(1)}% APR.</p>
                </div>
            `;
        }
        
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('span');
            
            if (answer.classList.contains('show')) {
                answer.classList.remove('show');
                icon.textContent = '+';
            } else {
                // Close all other FAQs
                document.querySelectorAll('.faq-answer').forEach(ans => {
                    ans.classList.remove('show');
                });
                document.querySelectorAll('.faq-question span').forEach(ic => {
                    ic.textContent = '+';
                });
                
                // Open this FAQ
                answer.classList.add('show');
                icon.textContent = '−';
            }
        }
        
        // Auto-calculate when inputs change
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    // Auto-calculate if all required fields are filled
                    const carPrice = document.getElementById('car-price').value;
                    const annualIncome = document.getElementById('annual-income').value;
                    
                    if (carPrice && annualIncome && document.getElementById('basic-tab').classList.contains('active')) {
                        setTimeout(calculateAffordability, 500);
                    }
                });
            });
        });
    </script>
</body>
</html>

